<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Dashboard</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #1e1e1e;
        color: white;
        overflow: hidden;
      }

      .weather-dashboard {
        width: 90%;
        max-width: 1000px;
        background: rgba(0, 0, 0, 0.7);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .search-bar {
        display: flex;
        width: 100%;
        justify-content: space-between;
        margin-bottom: 20px;
      }

      .search-bar input {
        flex: 1;
        padding: 10px;
        border-radius: 5px;
        border: none;
        font-size: 16px;
        margin-right: 10px;
      }

      .search-bar button {
        padding: 10px 20px;
        background: #ffa500;
        border: none;
        border-radius: 5px;
        color: white;
        font-size: 16px;
        cursor: pointer;
        transition: background 0.3s;
      }

      .search-bar button:hover {
        background: #ff8c00;
      }

      .weather-info {
        width: 100%;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        gap: 20px;
      }

      .temperature-section {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
      }

      .temperature-section .temperature {
        font-size: 4rem;
        margin: 10px 0;
      }

      .description {
        font-size: 1.5rem;
        text-transform: capitalize;
      }

      .details-section {
        flex: 1;
        text-align: left;
        line-height: 1.8;
      }

      .dynamic-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        transition: background 0.5s ease;
      }
    </style>
  </head>
  <body>
    <div class="dynamic-bg" id="dynamicBg"></div>
    <div class="weather-dashboard">
      <div class="search-bar">
        <input type="text" id="city" placeholder="Enter city name" />
        <button onclick="fetchWeather()">Search</button>
      </div>
      <div class="weather-info" id="weatherInfo">
        <div class="temperature-section">
          <div class="temperature" id="temperature">--°C</div>
          <div class="description" id="description">Weather Info</div>
        </div>
        <div class="details-section">
          <p id="humidity">Humidity: --%</p>
          <p id="wind">Wind Speed: -- km/h</p>
          <p id="cityName">City: --</p>
        </div>
      </div>
    </div>

    <script>
      async function fetchWeather() {
        const cityInput = document.getElementById("city");
        const city = cityInput.value;
        const weatherInfo = document.getElementById("weatherInfo");
        const temperature = document.getElementById("temperature");
        const description = document.getElementById("description");
        const humidity = document.getElementById("humidity");
        const wind = document.getElementById("wind");
        const cityName = document.getElementById("cityName");
        const dynamicBg = document.getElementById("dynamicBg");

        if (!city) {
          alert("Please enter a city name");
          return;
        }

        try {
          const response = await fetch(
            `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=392fc470c1ac8b42b2f40951a9a96cc4&units=metric`
          );
          const data = await response.json();

          if (data.cod === "404") {
            alert("City not found!");
            cityInput.value = "";
            return;
          }

          // Update UI with weather data
          temperature.textContent = `${Math.round(data.main.temp)}°C`;
          description.textContent = data.weather[0].description;
          humidity.textContent = `Humidity: ${data.main.humidity}%`;
          wind.textContent = `Wind Speed: ${data.wind.speed} km/h`;
          cityName.textContent = `City: ${data.name}`;

          // Update background dynamically
          const weatherMain = data.weather[0].main.toLowerCase();

          if (weatherMain.includes("cloud")) {
            dynamicBg.style.background =
              "url('https://images.unsplash.com/photo-1498085245356-7c3cda3b412f?q=80&w=1567&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') no-repeat center center/cover";
          } else if (weatherMain.includes("rain")) {
            dynamicBg.style.background =
              "url('https://images.unsplash.com/photo-1519692933481-e162a57d6721?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') no-repeat center center/cover";
          } else if (weatherMain.includes("clear")) {
            dynamicBg.style.background =
              "url('https://images.unsplash.com/photo-1496765111150-918497b59c9e?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') no-repeat center center/cover";
          } else {
            dynamicBg.style.background =
              "url('https://images.unsplash.com/photo-1561553590-267fc716698a?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fDE2MDB4OTAwJTJGJTNGd2VhdGhlcnxlbnwwfHwwfHx8MA%3D%3D') no-repeat center center/cover";
          }

          // Clear input field
          cityInput.value = "";
        } catch (error) {
          console.error("Error fetching weather data:", error);
          alert("Unable to fetch weather data. Please try again.");
          cityInput.value = "";
        }
      }
    </script>
  </body>
</html>
